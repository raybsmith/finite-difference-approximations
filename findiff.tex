\documentclass{article}

\usepackage{preamble}
%\usepackage{showkeys}
\usepackage[margin=1.0in]{geometry}
%\graphicspath{{figs/}}

\begin{document}

\section{uniform, centered, 1st derivative}
\begin{align}
    f'\left( x_i \right) &= af_{i-1} + bf_{i} + cf_{i+1}
    \\
    &= a\left( f_{i} - hf'\left( x_i \right) + \frac{h^2}{2}f''\left( x_i \right) + O\left( h^3 \right)\right)
    + bf_{i}
    + c\left( f_{i} + hf'\left( x_i \right) + \frac{h^2}{2}f''\left( x_i \right) + O\left( h^3 \right)\right)
    \\
    &= \left( a + b + c \right)f\left( x_i \right)
    + h\left( c - a \right)f'\left( x_i \right)
    + \frac{h^2}{2}\left( c + a \right)f''\left( x_i \right)
    + aO\left( h^3 \right) + cO\left( h^3 \right)
    \label{}
\end{align}
\begin{align}
    a + b + c &= 0
    \\
    c - a &= \frac{1}{h}
    \\
    c + a &= 0
    \label{}
\end{align}
\begin{align}
    a &= -\frac{1}{2h}
    \\
    b &= 0
    \\
    c &= \frac{1}{2h}
    \label{}
\end{align}
\begin{align}
    f'\left( x_i \right) = \frac{f_{i+1} - f_{i-1}}{2h} + O\left( h^2 \right).
    \label{}
\end{align}

\section{non-uniform, centered, 1st derivative}
\begin{align}
    f'\left( x_i \right) &= af_{i-1} + bf_{i} + cf_{i+1}
    \\
    &= a\left( f_{i} - h_{\ell}f'\left( x_i \right) + \frac{h_{\ell}^2}{2}f''\left( x_i \right) + O\left( h_{\ell}^3 \right)\right)
    + bf_{i}
    + c\left( f_{i} + h_{r}f'\left( x_i \right) + \frac{h_{r}^2}{2}f''\left( x_i \right) + O\left( h_{r}^3 \right)\right)
    \\
    &= \left( a + b + c \right)f\left( x_i \right)
    + \left( h_{r}c - h_{\ell}a \right)f'\left( x_i \right)
    + \frac{1}{2}\left( h_{r}^{2}c + h_{\ell}^{2}a \right)f''\left( x_i \right)
    + aO\left( h_{\ell}^3 \right) + cO\left( h_r^3 \right)
    \label{}
\end{align}
\begin{align}
    a + b + c &= 0
    \\
    h_{r}c - h_{\ell}a &= 1
    \\
    h_{r}^2c + h_{\ell}^2a &= 0
    \\ \nonumber
    \\
    a &= -\frac{h_{r}^2}{h_{\ell}^2}c
    \\
    \left( h_{r} + \frac{h_{r}^2}{h_{\ell}} \right)c &= 1
    \\
    c &= \frac{1}{h_{r}\left( 1 + \frac{h_r}{h_{\ell}} \right)}
    \\
    a &= -\frac{h_{r}}{h_{\ell}^2\left( 1 + \frac{h_r}{h_{\ell}} \right)}
    \\
    b &= -\left( a + c \right) = \frac{\frac{h_r}{h_{\ell}^2} - \frac{1}{h_r}}{\left( 1 + \frac{h_r}{h_{\ell}} \right)}
    \label{}
\end{align}

\section{non-uniform, right-sided, 1st derivative}
\begin{align}
    f'\left( x_i \right) &= af_{i} + bf_{i+1} + cf_{i+2}
    \\
    &= af\left( x_i \right) + b\left( f\left( x_i \right) + h_{1}f'\left( x_i \right) + \frac{h_{1}^2}{2}f''\left( x_i \right) + O\left( h_{1}^3 \right)\right)
    \\ \nonumber
    &\quad\ + c\left( f\left( x_{i} \right) + \left( h_{1} + h_{2} \right)f'\left( x_i \right) + \frac{{\left( h_{1} + h_{2} \right)}^2}{2}f''\left( x_i \right) + O\left( {\left( h_{1} + h_{2} \right)}^3 \right)\right)
    \\
    &= \left( a + b + c \right)f\left( x_i \right)
    + \left( bh_{1} + c\left( h_1 + h_2 \right) \right)f'\left( x_i \right)
    + \frac{1}{2}\left( bh_{1}^{2} + c{\left(h_{1} + h_2\right)}^2 \right)f''\left( x_i \right)
    \\ \nonumber
    &\quad\ + bO\left( h_1^3 \right) + cO\left( {\left( h_1 + h_2 \right)}^3 \right)
    \label{}
\end{align}
\begin{align}
    a + b + c &= 0
    \\
    h_{1}b + \left( h_1 + h_{2} \right)c &= 1
    \\
    h_{1}^{2}b + {\left( h_1 + h_2 \right)}^2c &= 0
\end{align}
\begin{align}
    &b = -\frac{{\left(h_{1} + h_2\right)}^2}{h_{1}^2}c
    \\
    &\left( h_1 + h_2 \right)\left( 1 - \frac{h_1 + h_2}{h_1} \right)c = -\frac{h_2}{h_1}\left( h_1 + h_2 \right)c = 1
    \\
    &c = -\frac{h_1}{h_{2}\left( h_1 + h_2 \right)}
    \\
    &b = \frac{\left( h_1 + h_2 \right)}{h_1h_2}
    \\
    &a = \frac{h_1}{h_2\left( h_1+h_2 \right)} - \frac{h_1+h_2}{h_1h_2}
    \label{}
\end{align}
\subsection{Uniform limit}
\begin{align}
    a &= \frac{1}{2h} - \frac{2}{h} = -\frac{3}{2h}
    \\
    b &= \frac{2}{h}
    \\
    c &= -\frac{1}{2h}
    \label{}
\end{align}
agrees with Wikipedia.

\section{non-uniform left-side, 1st derivative}
\begin{align}
    f'\left( x_i \right) &= af_{i} + bf_{i-1} + cf_{i-2}
    \\
    &= af\left( x_i \right) + b\left( f\left( x_i \right) - h_{1}f'\left( x_i \right) + \frac{h_{1}^2}{2}f''\left( x_i \right) + O\left( h_{1}^3 \right)\right)
    \\ \nonumber
    &\quad\ + c\left( f\left( x_{i} \right) - \left( h_{1} + h_{2} \right)f'\left( x_i \right) + \frac{{\left( h_{1} + h_{2} \right)}^2}{2}f''\left( x_i \right) + O\left( {\left( h_{1} + h_{2} \right)}^3 \right)\right)
    \\
    &= \left( a + b + c \right)f\left( x_i \right)
    - \left( bh_{1} + c\left( h_1 + h_2 \right) \right)f'\left( x_i \right)
    + \frac{1}{2}\left( bh_{1}^{2} + c{\left(h_{1} + h_2\right)}^2 \right)f''\left( x_i \right)
    \\ \nonumber
    &\quad\ + bO\left( h_1^3 \right) + cO\left( {\left( h_1 + h_2 \right)}^3 \right)
    \label{}
\end{align}
\begin{align}
    a + b + c &= 0
    \\
    h_{1}b + \left( h_1 + h_{2} \right)c &= -1
    \\
    h_{1}^{2}b + {\left( h_1 + h_2 \right)}^2c &= 0
\end{align}
\begin{align}
    &b = -\frac{{\left(h_{1} + h_2\right)}^2}{h_{1}^2}c
    \\
    &\left( h_1 + h_2 \right)\left( 1 - \frac{h_1 + h_2}{h_1} \right)c = -\frac{h_2}{h_1}\left( h_1 + h_2 \right)c = -1
    \\
    &c = \frac{h_1}{h_{2}\left( h_1 + h_2 \right)}
    \\
    &b = -\frac{\left( h_1 + h_2 \right)}{h_1h_2}
    \\
    &a = \frac{h_1+h_2}{h_1h_2} - \frac{h_1}{h_2\left( h_1+h_2 \right)}
    \label{}
\end{align}
\subsection{Uniform limit}
\begin{align}
    a &= \frac{2}{h} - \frac{1}{2h} = \frac{3}{2h}
    \\
    b &= -\frac{2}{h}
    \\
    c &= \frac{1}{2h}
    \label{}
\end{align}
agrees with Wikipedia.

\section{semi-centered-right, missing center, 1st derivative}
\begin{align}
    f'\left( x_i \right) &= af_{i-1} + bf_{i+1} + cf_{i+2}
    \\
    &= a\left( f\left( x_i \right) - h_{-1}f'\left( x_i \right) + \frac{h_{-1}^2}{2}f''\left( x_i \right) + O\left( h_{-1}^3 \right) \right)
    \\ \nonumber
    &\quad\ + b\left( f\left( x_i \right) + h_{1}f'\left( x_i \right) + \frac{h_{1}^2}{2}f''\left( x_i \right) + O\left( h_{1}^3 \right)\right)
    \\ \nonumber
    &\quad\ + c\left( f\left( x_{i} \right) + \left( h_{1} + h_{2} \right)f'\left( x_i \right) + \frac{{\left( h_{1} + h_{2} \right)}^2}{2}f''\left( x_i \right) + O\left( {\left( h_{1} + h_{2} \right)}^3 \right)\right)
    \\
    &= \left( a + b + c \right)f\left( x_i \right)
    + \left( -ah_{-1} + bh_{1} + c\left( h_1 + h_2 \right) \right)f'\left( x_i \right)
    \\ \nonumber
    &\quad\ + \frac{1}{2}\left( ah_{-1}^2 + bh_{1}^{2} + c{\left(h_{1} + h_2\right)}^2 \right)f''\left( x_i \right)
    \\ \nonumber
    &\quad\ + aO\left( h_{-1}^3 \right) + bO\left( h_1^3 \right) + cO\left( {\left( h_1 + h_2 \right)}^3 \right)
    \label{}
\end{align}
\begin{align}
    a + b + c &= 0
    \\
    -h_{-1}a + h_{1}b + \left( h_1 + h_{2} \right)c &= 1
    \\
    h_{-1}^{2}a + h_{1}^{2}b + {\left( h_1 + h_2 \right)}^2c &= 0
\end{align}
\begin{align}
    &h_{-1}^{2}a + h_{1}^{2}b - {\left( h_1 + h_2 \right)}^2\left( a+b \right) = 0
    \\
    &\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)a + \left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)b = 0
    \\
    &b = -\frac{\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)}{\left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)}a
    \\
    &-h_{-1}a - h_{1}\frac{\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)}{\left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)}a - \left( h_1 + h_2 \right)\left( a - \frac{\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)}{\left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)}a \right) = 1
    \\
    &a = \frac{1}{-h_{-1} - h_{1}\frac{\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)}{\left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)} - \left( h_1 + h_2 \right)\left( 1 - \frac{\left( h_{-1}^{2} - {\left( h_1 + h_2 \right)}^2 \right)}{\left( h_1^2 - {\left( h_1 + h_2 \right)}^2 \right)} \right)}
    \label{}
\end{align}

\end{document}

% vim: set tw=0 spell:
